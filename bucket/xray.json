{
    "version": "1.8.7",
    "description": "Xray, Penetrates Everything. Also the best v2ray-core, with XTLS support. Fully compatible configuration.",
    "homepage": "https://github.com/XTLS/Xray-core",
    "license": "MPL-2.0",
    "architecture": {
        "64bit": {
            "url": "https://github.com/XTLS/Xray-core/releases/download/v1.8.7/Xray-windows-64.zip",
            "hash": "sha512:402b6d22aea4c82a222d4b5be8b7fa4d074d2d87b4102a1e49069f735079322a67d5415bf8394d4cfc25c02acb0d74087f24be591f3d140d9c3e66e86fe87a29"
        },
        "32bit": {
            "url": "https://github.com/XTLS/Xray-core/releases/download/v1.8.7/Xray-windows-32.zip",
            "hash": "sha512:f4853d53886fb3f8100ba8c9437d6cd5eb70dbfe773f472ad4598ec276f7719ce09a4886bd26f2a2cf82fdd7e311bb505e1ee7c776d2401dba90d41c241e3503"
        }
    },
    "pre_install": [
        "if (-not (Test-Path \"$persist_dir\\config.json\")) { New-Item \"$dir\\config.json\" -ItemType file | Out-Null }",
        "$process_xray = Get-Process -name 'wxray' -ErrorAction SilentlyContinue",
        "if ($process_xray) {  Stop-Process -Id $process_xray.Id && Write-Output 'wxray hes been stoped'}",
        "$process_xray = Get-Process -name 'xray' -ErrorAction SilentlyContinue",
        "if ($process_xray) {  Stop-Process -Id $process_xray.Id && Write-Output 'wxray hes been stoped'}"
    ],
    "post_install":[
        "wxray.exe",
        "$process_xray = Get-Process -name 'wxray' -ErrorAction SilentlyContinue",
        "if ($process_xray) { Write-Output 'wxray has been started. If you don't need it, stop it manually'}"
    ],
    "env_add_path": ".",
    "persist": [
        "config.json",
        "geoip.dat",
        "geosite.dat"
    ],
    "checkver": "github",
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/XTLS/Xray-core/releases/download/v$version/Xray-windows-64.zip"
            },
            "32bit": {
                "url": "https://github.com/XTLS/Xray-core/releases/download/v$version/Xray-windows-32.zip"
            }
        },
        "hash": {
            "url": "$url.dgst",
            "regex": "SHA2-512= $sha512"
        }
    }
}
